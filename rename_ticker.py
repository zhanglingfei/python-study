
import os

import matplotlib.pyplot as plt
import pandas as pd

#from scipy.interpolate import spline
# フォントパスを指定 .ttf 形式でないと駄目な模様, 関連：https://github.com/matplotlib/matplotlib/pull/3912
# fp = FontProperties(fname='/Library/Fonts/Osaka.ttf', size=14)
#
# # get_name() で 'Osaka' が返ってきています。メソッドの代わりに = 'Osaka' としてもOK
# rcParams['font.family'] = fp.get_name()
plt.rcParams.update({'figure.max_open_warning': 0})
x=[]
y=[]
# athena_list=['6040','7561','7581','7823',
# '8005','9438','9704','9792','2910','6027','8202','9633','7554','2729','9671','7816','9945','2211','7844','9850','9990','9846','8200','7840','2331','3034','3659','4337','3349','2193','6076','9993','2371','9424',
# '9697','2931','3385','3660','8153','2686','7636','6630','9039','8022','2798','8163','2742','7603','3087','3397','3635','8167','2930','9035','8114','6071','7604','3091','2753','7829','8207','7621','2792','7806','7937','6097','5261','7630','7421','4344','4680','7475','3046','8168','8011','3341','9842',
# '7445','7936','2764','3319','3765','3395','8008','3415','2694','9979','7455','7564','8190','9713','7952','3097','2484','2138','3632','7951','3053','2726','9605','3193','3178','9627','9919','9873','7416','9900','9948','8111','7605','9416','9733','2780','2305','4924','8218','8217','2695','2674','9735','9206','9601','7520','8160','8174','4751','4704','3387','2659','8278','9419','9278',
# '8185','7860','3064','9994','8289','8276','9997','3549','7494','7974','3539','9722','9823','2157','9684','8179','9708','8255','7545','3665','4921','8237','9861','3333','2928','8244','3938','3050','8273','2790','7780','3098','3182','7616','3191','8227','2685','3148',
# '4927','9956','8165','7606','7550','9766','3197','9882','9974','2681','7649','2678','2670','7516','9603','8182','9989','8252','3088','2432','8016','9412','4839','6030','6191','3028','8281','8184','8214','7618','2730','3391','8203','9832','8219','8173','8194','8279','9783','3222','7513','9726',
# '6098','4661','7419','2752','7453','7532','8028','4385','8282','3099','3092','9201','9843','2651','8242','3048','9983','9202','9831','8267','3382','4755','9432','4689','9433','AMZN','9984']

athena_list=[6040,7561,7581,7823,
8005,9438,9704,9792,2910,6027,8202,9633,7554,2729,9671,7816,9945,2211,7844,9850,9990,9846,8200,7840,2331,3034,3659,4337,3349,2193,6076,9993,2371,9424,
9697,2931,3385,3660,8153,2686,7636,6630,9039,8022,2798,8163,2742,7603,3087,3397,3635,8167,2930,9035,8114,6071,7604,3091,2753,7829,8207,7621,2792,7806,7937,6097,5261,7630,7421,4344,4680,7475,3046,8168,8011,3341,9842,
7445,7936,2764,3319,3765,3395,8008,3415,2694,9979,7455,7564,8190,9713,7952,3097,2484,2138,3632,7951,3053,2726,9605,3193,3178,9627,9919,9873,7416,9900,9948,8111,7605,9416,9733,2780,2305,4924,8218,8217,2695,2674,9735,9206,9601,7520,8160,8174,4751,4704,3387,2659,8278,9419,9278,
8185,7860,3064,9994,8289,8276,9997,3549,7494,7974,3539,9722,9823,2157,9684,8179,9708,8255,7545,3665,4921,8237,9861,3333,2928,8244,3938,3050,8273,2790,7780,3098,3182,7616,3191,8227,2685,3148,
4927,9956,8165,7606,7550,9766,3197,9882,9974,2681,7649,2678,2670,7516,9603,8182,9989,8252,3088,2432,8016,9412,4839,6030,6191,3028,8281,8184,8214,7618,2730,3391,8203,9832,8219,8173,8194,8279,9783,3222,7513,9726,
6098,4661,7419,2752,7453,7532,8028,4385,8282,3099,3092,9201,9843,2651,8242,3048,9983,9202,9831,8267,3382,4755,9432,4689,9433,9984]
athena_list.sort()
#print(athena_list)

athena_list2=[]
#first we need read csv from dir
dir=f'/Users/stevenzhang/Downloads/ticker_fixed_raw_monthly_sales/'
file_list=[]
for i in os.walk(dir):
    #print(i[2])
    file_list.append(i[2])

#print(file_list[0])
#before plot first delete all older files
# for item in file_list[0]:
#     os.remove(os.path.join(dir,item))

#print(len(file_list[0]))
counter=1
for item in file_list[0]:
    if item =='.DS_Store' :
        #print (item)
        pass
    else:
        #print(counter)
        csv_data = pd.read_csv(os.path.join(dir,item))
        ticker_code=csv_data['ticker_code']

        athena_list2.append(ticker_code[0])
        if ticker_code[0]==4755:
            print(item)

        csv_data.to_csv(f'/Users/stevenzhang/Downloads/data/{ticker_code[0]}.csv', index=0)
        counter+=1


# athena_list3=list(set(athena_list2))
# athena_list3.sort()
print(len(athena_list))
print(len(athena_list2))
from collections import Counter #引入Counter
b = dict(Counter(athena_list2))
print ([key for key,value in b.items()if value > 1]) #只展示重复元素


# for i in range(10):
#     x.append(i)
#     y.append(i+1)
#     # data = pd.Series(np.random.randn(1000),index=np.arange(1000))
# data = pd.Series(x, y)
# data = data.cumsum()
# ax = data.plot()
# # plt.show()
# for i in range(10):
#     fig_handle=f'fig_{i}'
#     fig_handle = ax.get_figure()
#     fig_handle.savefig(f'fig_{i}.png')

